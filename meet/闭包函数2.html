<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>闭包函数2</title>
</head>
<body>
	
<script type="text/javascript">

//如果一定要引用循环变量怎么办？方法是再创建一个函数，用该函数的参数绑定循环变量当前的值，无论该循环变量后续如何更改，已绑定到函数参数的值不变：
function count(){
	var arr = [];
	for (var i = 1; i <= 3; i++ ) {
		arr.push(
			(function(n){
				return function(){
					return n*n;
				}
		    })(i)
		);

   }
   return arr;
}
var results = count();
console.log(results)//[f(),f(),f()]

var f1 = results[0];
console.log(f1())//1
var f2 = results[1];
console.log(f2())//4
var f3 = results[2];
console.log(f3())//9



/*
 *注意这里用了一个“创建一个匿名函数并立刻执行”的语法
	(function (x) {
	    return x * x;
	})(3); // 9

*/

</script>
</body>
</html>